<html>
  <head>
    <link rel="stylesheet" href="/styles.css">
  </head>
  <%- include('navbar') %>
  <header>
    <h1><%= title %></h1>
  </header>
  <form action="<%= postUrl %>/addFolder" method="post">
    <h2>Add new folder here</h2>
    <section>
      <p>
        <label for="newFolder">
          <span>New Folder in this Directory: </span>
          <strong><span aria-label="required">*</span></strong>
        </label>
        <input type="text" id="newFolder" name="newFolder" required>
      </p>
    </section>
    <section>
      <p>
        <button type="upload">Make New Folder</button>
      </p>
    </section>
  </form>
  <div>
    <% if (locals.id) { %>
      <form action="/folders/update/<%= id %>" method="post">
        <h2>Rename this Folder</h2>
        <section>
          <p>
            <label for="newName">
              <span>Rename as: </span>
              <strong><span aria-label="required">*</span></strong>
            </label>
            <input type="text" id="newName" name="newName" required>
          </p>
        </section>
        <p>
          <button type="upload">Rename this Folder</button>
        </p>
      </form>
    <% } %>
    <% if (folders.length === 0 && locals.id) { %>
      <form action="/folders/delete/<%= id %>" method="post">
          <p>
            <button type="upload">Delete This Folder</button>
          </p>
      </form>
    <% } else { %>
      <% for (let i = 0; i < folders.length; i++) { %>
        <li>
          <a href="<%= postUrl %>/<%= folders[i].id %>">
            <span><%= folders[i].name %></span>
          </a>
        </li>
      <% } %>
    <% } %>

    <% if (locals.id) { %>
      <form action="/upload/<%= id %>" method="post" enctype="multipart/form-data">
    <% } else { %>
      <form action="/upload/root" method="post" enctype="multipart/form-data">
    <% } %>
      <h2>New Image</h2>
      <section>
        <p>
          <label for="uploaded_file">
            <span>Select image from my folders: </span>
            <strong><span aria-label="required">*</span></strong>
          </label>
          <input type="file" id="uploaded_file" name="uploaded_file" 
            accept=".png, .jpeg, .jpg, .gif"
            required>
        </p>
      </section>
      <section>
        <p>
          <button type="upload">Upload</button>
        </p>
      </section>
    </form>
    <div>
      <h2>Files Here</h2>
      <% if (files.length !== 0) { %>
        <ul>
        <% for (let i = 0; i < files.length; i++) { %>
          <li>
            <a href="/<%= files[i].prefix + '-' + files[i].originalName %>">
              <span><%= files[i].originalName %></span>
            </a>
          </li>
        <% } %>
        </ul>
      <% } else { %>
        <p>No files uploaded yet!</p>
      <% } %>
    </div>
  </div>
</html>